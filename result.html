<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ìˆ˜ë©´ ìœ í˜• ê²°ê³¼</title>
  <style>
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; background: #f0f8ff; color: #333; }
    h1 { color: #2a6ebb; }
    ul { list-style: inside disc; }
    li { margin: 8px 0; }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background: #2a6ebb;
      border: none;
      border-radius: 5px;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: #1e4f8b;
    }
    hr {
      margin: 20px 0;
      border: 0;
      border-top: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <h1>ìˆ˜ë©´ ìœ í˜• ê²°ê³¼</h1>
  <div id="resultContainer"></div>

  <script>
    // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì—ì„œ ì„¤ë¬¸ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    const data = JSON.parse(localStorage.getItem('surveyResult'));

    function analyzeSleep(data) {
      if (!data) return "<p>ì„¤ë¬¸ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";

      const {
        sleepDuration = "",
        deviceUsage = "",
        sleepPosture = "",
        pillowType = "",
        separateSpace = "",
        beddingCondition = ""
      } = data;

      let score = 0;
      const feedback = [];

      // ìˆ˜ë©´ì‹œê°„ ì ìˆ˜ ë° í”¼ë“œë°±
      if (sleepDuration.includes("8ì‹œê°„ ì´ìƒ")) {
        score += 10;
        feedback.push("ğŸ›Œ ìˆ˜ë©´ ì‹œê°„ì´ ì¶©ë¶„í•´ìš”. ì•„ì£¼ ì¢‹ì•„ìš”!");
      } else if (sleepDuration.includes("6~8ì‹œê°„")) {
        score += 7;
        feedback.push("â° ìˆ˜ë©´ ì‹œê°„ì´ ì¡°ê¸ˆ ë¶€ì¡±í•  ìˆ˜ ìˆì–´ìš”. 7~8ì‹œê°„ì„ ëª©í‘œë¡œ í•´ë³´ì„¸ìš”.");
      } else if (sleepDuration.includes("4~6ì‹œê°„")) {
        score += 4;
        feedback.push("ğŸ˜´ ìˆ˜ë©´ ì‹œê°„ì´ ë¶€ì¡±í•´ìš”. ê±´ê°•ì„ ìœ„í•´ ì‹œê°„ì„ ëŠ˜ë¦¬ì„¸ìš”.");
      } else {
        score += 1;
        feedback.push("ğŸš¨ ìˆ˜ë©´ ì‹œê°„ì´ ë§¤ìš° ë¶€ì¡±í•©ë‹ˆë‹¤! ë‹¹ì¥ ê°œì„ ì´ í•„ìš”í•´ìš”!");
      }

      // ì „ìê¸°ê¸° ì‚¬ìš© ì‹œê°„ ì ìˆ˜ ë° í”¼ë“œë°±
      if (deviceUsage === "ì‚¬ìš© ì•ˆí•¨") {
        score += 5;
        feedback.push("ğŸ“µ ì „ìê¸°ê¸° ì‚¬ìš©ì„ ì˜ ì¡°ì ˆí•˜ê³  ìˆë„¤ìš”. ë‡Œê°€ í¸ì•ˆí•´ìš”!");
      } else if (deviceUsage === "1ì‹œê°„ ì „") {
        score += 3;
        feedback.push("ğŸŒ™ ì „ìê¸°ê¸° ì‚¬ìš© ì‹œê°„ì´ ì¡°ê¸ˆ ëŠ¦ì–´ìš”. ì ë“¤ê¸° 30ë¶„ ì „ì—” ë©ˆì¶”ëŠ” ê²Œ ì¢‹ì•„ìš”.");
      } else {
        score += 0;
        feedback.push("âš ï¸ ìŠ¤ë§ˆíŠ¸í° ì§ì „ê¹Œì§€ ì‚¬ìš©í•˜ë©´ ìˆ™ë©´ì— ë°©í•´ë©ë‹ˆë‹¤. ì‚¬ìš© ì‹œê°„ì„ ì¤„ì´ì„¸ìš”!");
      }

      // ìˆ˜ë©´ ìì„¸ ì ìˆ˜ ë° í”¼ë“œë°±
      if (sleepPosture.includes("ì˜†ìœ¼ë¡œ")) {
        score += 5;
        feedback.push("ğŸ‘ ì˜†ìœ¼ë¡œ ìëŠ” ìì„¸ëŠ” ì²™ì¶” ê±´ê°•ì— ì¢‹ì•„ìš”.");
      } else if (sleepPosture.includes("ë“±")) {
        score += 4;
        feedback.push("ğŸ˜Š ë“±ì„ ëŒ€ê³  ìëŠ” ìì„¸ëŠ” ê´œì°®ì§€ë§Œ, ë•Œë•Œë¡œ ìì„¸ë¥¼ ë°”ê¿”ì£¼ì„¸ìš”.");
      } else {
        score += 2;
        feedback.push("ğŸ§˜ ì—ë“œë¦¬ê±°ë‚˜ ëª¸ì„ ë§ê³  ìë©´ ì²™ì¶”ì— ë¶€ë‹´ì´ ë  ìˆ˜ ìˆì–´ìš”. ìì„¸ë¥¼ ì¡°ì‹¬í•˜ì„¸ìš”.");
      }

      // ë² ê°œ ì¢…ë¥˜ ì ìˆ˜ ë° í”¼ë“œë°±
      if (pillowType === "ë©”ëª¨ë¦¬í¼") {
        score += 5;
        feedback.push("ğŸ›ï¸ ë©”ëª¨ë¦¬í¼ ë² ê°œê°€ ëª©ê³¼ ì–´ê¹¨ë¥¼ ì˜ ë°›ì³ì¤˜ìš”. ì¢‹ì•„ìš”!");
      } else if (pillowType === "ì¼ë°˜") {
        score += 3;
        feedback.push("ğŸ’¤ ë² ê°œê°€ í‰ë²”í•´ìš”. ëª© ê±´ê°•ì„ ìœ„í•´ ë” ì¢‹ì€ ë² ê°œë¥¼ ê³ ë ¤í•´ë³´ì„¸ìš”.");
      } else {
        score += 1;
        feedback.push("âš ï¸ ë² ê°œ ìƒíƒœê°€ ì¢‹ì§€ ì•Šì„ ìˆ˜ ìˆì–´ìš”. êµì²´ë¥¼ ê³ ë¯¼í•´ë³´ì„¸ìš”.");
      }

      // ê³µê°„ ë¶„ë¦¬ ì ìˆ˜ ë° í”¼ë“œë°±
      if (separateSpace === "ì˜ˆ") {
        score += 5;
        feedback.push("ğŸšª ìˆ˜ë©´ ê³µê°„ì´ ì˜ ë¶„ë¦¬ë˜ì–´ ì§‘ì¤‘í•˜ê¸° ì¢‹ì•„ìš”.");
      } else {
        score += 1;
        feedback.push("ğŸ”• ìˆ˜ë©´ ê³µê°„ì´ ë¶„ë¦¬ë˜ì§€ ì•Šì•„ ë°©í•´ê°€ ë  ìˆ˜ ìˆì–´ìš”. ë¶„ë¦¬ ì‹œë„í•´ë³´ì„¸ìš”.");
      }

      // ì¹¨êµ¬ ìƒíƒœ ì ìˆ˜ ë° í”¼ë“œë°±
      if (beddingCondition === "ì˜ˆ") {
        score += 5;
        feedback.push("ğŸŒŸ ì¹¨êµ¬ ìƒíƒœê°€ ê¹¨ë—í•˜ê³  í¸ì•ˆí•´ìš”. ì•„ì£¼ ì¢‹ì•„ìš”!");
      } else {
        score += 1;
        feedback.push("ğŸ›ï¸ ì¹¨êµ¬ ìƒíƒœê°€ ì¢‹ì§€ ì•Šìœ¼ë©´ ìˆ™ë©´ì— ë°©í•´ë¼ìš”. ì²­ê²°ì„ ìœ ì§€í•˜ì„¸ìš”.");
      }

      // ì´ì  ê¸°ì¤€ ìœ í˜• ë¶„ë¥˜
      let type = "";
      if (score >= 30) type = "ì™„ë²½í•œ ìˆ˜ë©´ ì²œì‚¬í˜•";
      else if (score >= 20) type = "ê±´ê°•í•œ ìˆ˜ë©´ ë£¨í‹´í˜•";
      else if (score >= 10) type = "ìˆ˜ë©´ ê´€ë¦¬ í•„ìš”í˜•";
      else type = "ìœ„í—˜ ì‹ í˜¸í˜•";

      // ê²°ê³¼ HTML ë°˜í™˜
      return `
        <p><strong>ë‹¹ì‹ ì˜ ìˆ˜ë©´ ìœ í˜•:</strong> ${type}</p>
        <p><strong>ì´ ì ìˆ˜:</strong> ${score}ì </p>
        <hr />
        <h3>ìƒì„¸ í”¼ë“œë°±</h3>
        <ul>
          ${feedback.map(item => `<li>${item}</li>`).join('')}
        </ul>
        <button onclick="window.location.href='index.html'">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
      `;
    }

    const container = document.getElementById('resultContainer');
    container.innerHTML = analyzeSleep(data);
  </script>
</body>
</html>
